(this["webpackJsonpreact-form-table"]=this["webpackJsonpreact-form-table"]||[]).push([[0],{28:function(e){e.exports=JSON.parse('[{"_id":1,"product_name":"basic keyboard","weight":"500g","availability":261,"url":"https://amazon.com/basic_keyboard","price_tier":"budget","price_range":"$11-20","unit_cost":"$10.47","is_editable":true},{"_id":2,"product_name":"gaming keyboard","weight":"500g","availability":40,"url":"https://amazon.com/gaming_keyboard","price_tier":"premium","price_range":"$50-100","unit_cost":"$55.99","is_editable":false},{"_id":3,"product_name":"custom mechanical keyboard","weight":"2.5Kg","availability":10,"url":"https://amazon.com/custom_mech_board","price_tier":"premium","price_range":"$200+","unit_cost":"$250","is_editable":true}]')},35:function(e,t,a){e.exports=a(50)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),l=a(13),o=a(14),u=a(34),s=(a(44),a(17)),d=a(5),m=a(28),b=(a(45),a(6)),p=a(25),h=(a(46),{shadow:{shadowColor:"#000000",shadowOffset:{width:1,height:1},shadowOpacity:.06},flexCenter:{justifyContent:"center",flexWrap:"wrap"},flexBetween:{display:"flex",justifyContent:"space-between"},textCenter:{textAlign:"center"},cursorPointer:{cursor:"pointer"},button:{borderRadius:"25px",padding:"12px",border:"none",color:"white",fontWeight:"bold"},secondary:{background:"#aaa"},container:{marginRight:"auto",marginLeft:"auto",maxWidth:"75%"},field:{boxShadow:"0 1px 1px 0 #D9DFE4",border:"none",height:"40px"}});function f(e){var t=e.schema.show.map((function(e){return e.replace("_"," ").replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()}))})),a=e.data.map((function(t){return e.schema.show.map((function(e){return t[e]}))})),n=function(t,a){return[].concat(Object(p.a)(t.map((function(e,t){return r.a.createElement("td",{key:t},e)}))),[e.schema.actions.showEdit(e.data[a])?r.a.createElement("td",{class:"edit-row",onClick:function(){return e.schema.actions.onEdit(e.data[a])},key:t.length},"Edit"):r.a.createElement("td",null)])},c=Object(d.e)();return r.a.createElement("div",null,r.a.createElement("h2",null,e.schema.title),r.a.createElement("div",{style:h.flexBetween},r.a.createElement("button",{onClick:function(){c.push("/create")},class:"save-button",style:Object(b.a)(Object(b.a)({},h.cursorPointer),h.button)},"Create")),r.a.createElement("table",{class:"simple-table"},r.a.createElement("thead",null,t.map((function(e,t){return r.a.createElement("th",{key:t},e)})),r.a.createElement("th",null)),r.a.createElement("tbody",null,function(e){return e.map((function(e,t){return r.a.createElement("tr",{key:t},n(e,t))}))}(a))))}var v=Object(l.b)((function(e){return{products:e.objects}}),null)((function(e){var t=Object(d.e)(),a={title:"PRODUCTS",show:["product_name","weight","availability"],actions:{showEdit:function(e){return e.is_editable},onEdit:function(e){t.push("/edit?id=".concat(e._id))}}};return r.a.createElement("div",{style:h.container},r.a.createElement(f,{data:e.products,schema:a}))})),E=a(16),g=a(23),_=(a(48),function(){var e={required:function(e){return void 0!==e&&null!==e&&String(e).length>0},isChecked:function(e){return e},minlength:function(e,t){return""===e||String(e).length>t},maxlength:function(e,t){return""===e||String(e).length<t},number:function(e){return""===e||!isNaN(Number(e))},positive:function(e){return""===e||Number(e)>=0},email:function(e){return""===e||/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},username:function(e){return""===e||/^[A-Za-z0-9]+(?:[_-][A-Za-z0-9]+)*$/.test(e)},url:function(e){return""===e||/[-a-zA-Z0-9@:%._~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_.~#?&//=]*)/.test(e)},equal:function(e){for(var t=e.getElementsByTagName("input"),a=t[0].value,n=!0,r=1;r<t.length;r++)if(t[r].value!==a){n=!1;break}return n}};return{getValidator:function(t,a){return e[t]},errorMsgs:{number:"should be a valid number",positive:"should be a positive number ",required:"is Required",email:"should be a valid a email address",username:"should only contain letters, digits, hyphens and underscores",url:"should be a valid url",minlength:"should have a minimum of $$ characters ",maxlength:"should have a maximum length of $$"}}}());function y(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)([]),o=Object(E.a)(l,2),u=o[0],s=o[1],m=Object(n.useState)(e.values||{}),f=Object(E.a)(m,2),v=f[0],y=f[1],O=function(t){var a=t.target,n=a.name,r=e.schema.fields[n];r.onChange&&r.onChange(a);var c="checkbox"===a.type?a.checked:a.value,i=a.parentElement,l=u.indexOf(n),o=r.validators&&x(c,r.validators);o?(r.errorText=o.customErrMsg?o.customErrMsg:r.label+" "+_.errorMsgs[o.name].replace("$$",o.specs),i.classList.add("error"),-1===l&&u.push(n),s(u)):(r.errorText="",i.classList.remove("error"),-1!==l&&u.splice(l,1),s(u)),i.classList.remove("clean"),y(Object(b.a)(Object(b.a)({},v),{},Object(g.a)({},n,c)))};Object(n.useEffect)((function(){e.schema.sections.forEach((function(t){t.fieldNames.forEach((function(t){var a=e.schema.fields[t];a.validators&&x(v[t],a.validators)&&u.push(t)&&s(Object(p.a)(u))}))}))}),[]);var j=function(t){return t.map((function(t,a){var n,c=e.schema.fields[t];switch(c.type){case"dropdown":n=r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,c.label),r.a.createElement("select",{name:t,style:h.field,onChange:O,value:v[t],placeholder:"Select an option"},c.options.map((function(e){return r.a.createElement("option",{value:e},e)}))));break;case"checkbox":n=r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{name:t,type:c.type,onChange:O,checked:v[t]}),r.a.createElement("label",null," ",c.label," "));break;case"radio":n=r.a.createElement(r.a.Fragment,null,c.options.map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{id:e,name:t,type:c.type,onChange:O,value:e,checked:v[t]===e}),r.a.createElement("label",{for:e},e))})));break;default:n=r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null," ",c.label," "),r.a.createElement("input",{name:t,clean:!0,style:h.field,key:a,type:c.type,onChange:O,value:v[t]||""}))}return r.a.createElement("div",{class:"field"},n,c.validators&&r.a.createElement("div",{class:"error-msg"}," ",c.errorText," "))}))},C=Object(d.e)().goBack,x=function(e,t){var a;return t.some((function(t){return a=t,!_.getValidator(t.name)(e,t.specs)}))&&a};return r.a.createElement("div",{style:h.container},r.a.createElement("h2",null,e.schema.title),r.a.createElement("div",{style:h.flexBetween},r.a.createElement("button",{onClick:C,style:Object(b.a)(Object(b.a)(Object(b.a)({},h.cursorPointer),h.button),h.secondary)},"Cancel"),r.a.createElement("button",{disabled:u.length,onClick:function(){e.onSaveClicked(v),i(!0),setTimeout(C,2e3)},class:"save-button",style:Object(b.a)(Object(b.a)({},h.cursorPointer),h.button)},c?"Saving...":"Save")),e.schema.sections.map((function(e,t){return r.a.createElement("div",{class:"section",key:t},r.a.createElement("h3",null," ",e.title," "),j(e.fieldNames))})))}var O={premium:["$50-99","$100-199","$200+"],budget:["$1-10","$11-20","$20-50"]};var j=Object(l.b)((function(e){return{objects:e.objects}}),(function(e){return{onCreate:function(t){return e({type:"CREATE_OBJECT",value:t})},onEdit:function(t){return e({type:"EDIT_OBJECT",value:t})}}}))((function(e){var t={product_name:{type:"text",label:"Name",validators:[{name:"required"}]},weight:{type:"text",label:"Weight",validators:[{name:"required"}]},url:{type:"text",label:"Product url",validators:[{name:"required"},{name:"url"}]},availability:{type:"number",label:"Availability",validators:[{name:"required"},{name:"positive"},{name:"maxlength",specs:4}]},price_tier:{type:"radio",label:"Price Tier",validators:[{name:"required"}],options:["budget","premium"]},price_range:{type:"dropdown",label:"Price Range",validators:[{name:"required"}],options:[]},is_editable:{type:"checkbox",validators:[{name:"isChecked",customErrMsg:"Product should be editable"}],label:"Is Editable"}},a=Object(n.useState)({sections:[{title:"Basic",fieldNames:["product_name","weight","url","availability"]},{title:"Pricing",fieldNames:["price_tier","price_range","is_editable"],validators:[{name:"equal",customErrMsg:"Password and Confirm password should be equal."}]}],fields:t,title:"PRODUCT FORM"}),c=Object(E.a)(a,2),i=c[0],l=c[1],o={price_tier:"budget",is_editable:"true",price_range:O.budget[0]},u=o,s=e.location.search.match(/[1-9]+/g);return s&&(u=e.objects.filter((function(e){return e._id===Number(s[0])}))[0]||o),t.price_range.options=O[u.price_tier],t.price_tier.onChange=function(e){t.price_range.options=O[e.value],l(Object(b.a)({},i))},r.a.createElement("div",{style:h.container},r.a.createElement(y,{values:u,data:e.objects,schema:i,onSaveClicked:function(t){s?e.onEdit(t):e.onCreate(t)}}))}));var C=Object(l.b)((function(e){return{objects:e.objects,rows:e.rows}}),(function(e){return{onInit:function(){return e({type:"INIT_OBJECTS",value:m})}}}))((function(e){return e.onInit(m),r.a.createElement(s.a,null,r.a.createElement("header",{class:"header"},r.a.createElement("div",{id:"logo"}),r.a.createElement("h1",null,"Table and Form Builder")),r.a.createElement("div",{class:"body"},r.a.createElement(d.a,{path:"/create",component:j}),r.a.createElement(d.a,{path:"/edit",component:j}),r.a.createElement(d.a,{exact:!0,path:"/",component:v})))})),x={objects:[]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=Object(b.a)({},e);switch(t.type){case"INIT_OBJECTS":a.objects=t.value;break;case"CREATE_OBJECT_ASYNC":var n=e.objects[e.objects.length-1]._id+1;a.objects.push(Object(b.a)(Object(b.a)({},t.value),{},{_id:n}));break;case"EDIT_OBJECT_ASYNC":var r=a.objects.findIndex((function(e){return e._id===t.value._id}));a.objects[r]=t.value;break;default:return a}return a},k=a(12),T=a.n(k),S=a(11),$=T.a.mark(B);function B(e){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.b)(2e3);case 2:return t.next=4,Object(S.c)({type:"EDIT_OBJECT_ASYNC",value:e.value});case 4:case"end":return t.stop()}}),$)}var N=T.a.mark(A);function A(e){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.b)(2e3);case 2:return t.next=4,Object(S.c)({type:"CREATE_OBJECT_ASYNC",value:e.value});case 4:case"end":return t.stop()}}),N)}var I=T.a.mark(J);function J(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)([Object(S.d)("EDIT_OBJECT",B),Object(S.d)("CREATE_OBJECT",A)]);case 2:case"end":return e.stop()}}),I)}var q=Object(u.a)(),P=Object(o.d)(w,Object(o.a)(q));q.run(J),i.a.render(r.a.createElement(l.a,{store:P},r.a.createElement(C,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.eff94e33.chunk.js.map